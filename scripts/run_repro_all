#!/bin/bash

if [ $# -lt 2 ]; then
  echo "Usage: $0 ID-FROM ID-TO" 2>/dev/null
  exit 1
fi

id1=$1
id2=$2

time=$((1*15*60))

SCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )

for id in $(seq $id1 $id2); do

  screen -S "repro-normal-$id" -dm -t "repro-normal-$id"
    screen -S "repro-normal-$id" -p "repro-normal-$id" -X stuff "$SCRIPT_DIR/run_repro \"nextflow-normal-${id}\"^M"

  screen -S "repro-base-$id" -dm -t "repro-base-$id"
    screen -S "repro-base-$id" -p "repro-base-$id" -X stuff "$SCRIPT_DIR/run_repro \"nextflow-base-${id}\" -b^M"

  screen -S "repro-blind-$id" -dm -t "repro-blind-$id"
    screen -S "repro-blind-$id" -p "repro-blind-$id" -X stuff "$SCRIPT_DIR/run_repro \"nextflow-blind-${id}\"^M"

  screen -S "repro-baseblind-$id" -dm -t "repro-blaseblind-$id"
    screen -S "repro-baseblind-$id" -p "repro-blaseblind-$id" -X stuff "$SCRIPT_DIR/run_repro \"nextflow-baseblind-${id}\" -b^M"

sleep $time

done
